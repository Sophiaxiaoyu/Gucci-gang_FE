(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[1],{17:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return p}));var n=r(0),a=r(4),c=r.n(a),s=r(6),i=r(5),o=r(8),l=r(1),u=r(33),d=function(e){var t=e.children,r=p(),n=r.setIsLoggedIn,a=r.setUserData,i=r.setAuthData,d=r.isLoggedIn;return Object(l.useMemo)((function(){d&&o.a.interceptors.response.use((function(e){return e}),function(){var e=Object(s.a)(c.a.mark((function e(t){var r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.config,401!==t.response.status||"/auth/refresh-token"!==r.url){e.next=3;break}return e.abrupt("return",new Promise((function(e,r){n(!1),i(null),a(null),u.a.push("/login"),r(t)})));case 3:if(401!==t.response.status||r._retry){e.next=20;break}return e.prev=4,r._retry=!0,e.next=8,o.a.post("/auth/refresh-token");case 8:return s=e.sent,localStorage.setItem("token",JSON.stringify(s.data.token)),e.abrupt("return",Object(o.a)(r));case 13:e.prev=13,e.t0=e.catch(4),localStorage.removeItem("token"),n(!1),i(null),a(null),u.a.push("/login");case 20:return e.abrupt("return",Promise.reject(t));case 21:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}())}),[d,i,n,a]),t},j=r(22),b=Object(l.createContext)(),m=function(e){var t=e.children,r=Object(l.useState)(null),a=Object(i.a)(r,2),u=a[0],m=a[1],p=Object(l.useState)({token:""}),x=Object(i.a)(p,2),O=x[0],h=x[1],f=Object(l.useState)(!1),g=Object(i.a)(f,2),v=g[0],y=g[1];Object(l.useEffect)((function(){v&&j.a.getCurrentUser().then((function(e){return m(null===e||void 0===e?void 0:e.data)}))}),[v]),Object(l.useEffect)((function(){localStorage.getItem("token")&&(y(!0),h(JSON.parse(localStorage.getItem("token"))))}),[]);var w=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,n,a,s,i,l,d,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fullname,n=t.email,a=t.username,s=t.address,i=t.city,l=t.state,d=t.country,e.next=3,o.a.put("/users/".concat(u.user_id),{fullname:r,email:n,username:a,address:s,city:i,state:l,country:d});case 3:j=e.sent,m(j.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(b.Provider,{value:{userData:u,setUserData:m,setUserState:function(e){return function(e){var t=e.user,r=e.token;y(!0),m(t),h({token:r}),localStorage.setItem("token",JSON.stringify(r))}(e)},logout:function(){m(null),h(null),y(!1),j.a.logout()},isLoggedIn:v,setIsLoggedIn:y,authData:O,setAuthData:h,updateUserData:w},children:Object(n.jsx)(d,{children:t})})},p=function(){var e=Object(l.useContext)(b);if(void 0===e)throw new Error("useUser must be used within UserProvider");return e}},18:function(e,t,r){"use strict";var n=r(0),a=r(5),c=r(2),s=r(20),i=r(1),o=r(13),l=r(99),u=r(100),d=r(101),j=r(17),b=function(){var e,t=Object(s.b)().cartTotal,r=Object(j.b)(),b=r.isLoggedIn,m=r.userData,p=r.logout,x=Object(i.useState)(!1),O=Object(a.a)(x,2),h=O[0],f=O[1];return Object(n.jsxs)("nav",{className:"flex items-center justify-between px-2 lg:px-36 py-2 shadow-lg fixed w-full bg-white top-0 z-10",children:[Object(n.jsx)(o.a,{to:"/",className:"text-gray-700 text-2xl font-bold dark:text-gray-400",children:Object(n.jsx)("h1",{children:"PERN Store"})}),Object(n.jsxs)("ul",{className:"flex space-x-4",children:[!b&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("li",{children:Object(n.jsx)(o.a,{to:"/login",children:Object(n.jsx)(c.Button,{layout:"link",children:Object(n.jsx)("span",{children:"login"})})})}),Object(n.jsx)("li",{children:Object(n.jsx)(o.a,{to:"/cart",children:Object(n.jsxs)(c.Button,{layout:"link",children:[Object(n.jsx)("span",{className:"lg:block hidden",children:"Cart"}),Object(n.jsx)(l.a,{className:"lg:hidden"}),Object(n.jsx)(c.Badge,{className:"ml-2",type:"danger",children:t})," "]})})})]}),b&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("li",{children:Object(n.jsx)(o.a,{to:"/cart",children:Object(n.jsxs)(c.Button,{layout:"link",children:[Object(n.jsx)("span",{className:"lg:block hidden",children:"Cart"}),Object(n.jsx)(l.a,{className:"lg:hidden"}),Object(n.jsx)(c.Badge,{className:"ml-2",type:"danger",children:t})," "]})})}),Object(n.jsxs)("li",{className:"relative",children:[Object(n.jsxs)(c.Button,{layout:"link",onClick:function(){return f(!h)},children:[Object(n.jsx)("span",{className:"lg:block hidden",children:"Account"}),Object(n.jsx)(u.a,{className:"lg:hidden"})]}),Object(n.jsx)(c.Transition,{show:h,enter:"transition ease-out duration-150 transform",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-75 transform",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:Object(n.jsxs)(c.Dropdown,{align:"right",isOpen:h,className:"z-10",children:[Object(n.jsxs)(c.DropdownItem,{className:"cursor-not-allowed text-gray-400 border-b flex flex-col items-start justify-start",children:[Object(n.jsx)("p",{className:"self-start",children:null===m||void 0===m||null===(e=m.fullname)||void 0===e?void 0:e.split(" ").join(" ")}),Object(n.jsxs)("p",{className:"self-start",children:["@",null===m||void 0===m?void 0:m.username]})]}),Object(n.jsx)(c.DropdownItem,{tag:"a",children:Object(n.jsx)(o.a,{className:"w-full",to:"/profile",children:"Profile"})}),Object(n.jsx)(c.DropdownItem,{tag:"a",children:Object(n.jsx)(o.a,{className:"w-full",to:"/orders",children:"Orders"})}),Object(n.jsx)(c.DropdownItem,{tag:"a",className:"border-t",children:Object(n.jsx)(o.a,{className:"w-full",onClick:function(){return p()},to:"/login",children:Object(n.jsx)(c.Button,{iconRight:d.a,block:!0,children:"Logout"})})})]})})]})]})]})]})},m=r(34),p=r(35);t.a=function(e){var t=e.children,r=e.title,a=e.loading;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(p.a,{children:[Object(n.jsx)("meta",{charSet:"utf-8"}),Object(n.jsxs)("title",{children:[r||"Home"," | PERN Store "]}),Object(n.jsx)("meta",{name:"description",content:"Ecommerce store built with React, Node, Express and Postgres"}),Object(n.jsx)("meta",{name:"robots",content:"max-snippet:-1, max-image-preview:large, max-video-preview:-1"}),Object(n.jsx)("link",{rel:"canonical",href:"https://pern-store.netlify.app/"}),Object(n.jsx)("meta",{property:"og:locale",content:"en_US"}),Object(n.jsx)("meta",{property:"og:type",content:"website"}),Object(n.jsx)("meta",{property:"og:title",content:"PERN Store"}),Object(n.jsx)("meta",{property:"og:description",content:"Ecommerce store built with React, Node, Express and Postgres"}),Object(n.jsx)("meta",{property:"og:url",content:"https://pern-store.netlify.app/"}),Object(n.jsx)("meta",{property:"og:site_name",content:"PERN Store"}),Object(n.jsx)("meta",{property:"og:image",content:"android-chrome-512x512.png"}),Object(n.jsx)("meta",{property:"og:image:secure_url",content:"android-chrome-512x512.png"}),Object(n.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),Object(n.jsx)("meta",{name:"twitter:site",content:"@_odunsi_"}),Object(n.jsx)("meta",{name:"twitter:creator",content:"@_odunsi_"}),Object(n.jsx)("meta",{name:"twitter:description",content:"Ecommerce store built with React, Node, Express and Postgres"}),Object(n.jsx)("meta",{name:"twitter:title",content:"PERN Store"}),Object(n.jsx)("meta",{name:"twitter:image",content:"android-chrome-512x512.png"}),Object(n.jsx)("style",{type:"text/css",children:"\n        html,body{\n          height: 100%;\n        }\n    "})]}),Object(n.jsxs)("div",{className:"min-h-screen flex flex-col",children:[Object(n.jsx)(b,{}),a?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(m.a,{size:100,loading:!0})}):Object(n.jsx)("div",{className:"text-gray-700 mt-16 mx-auto px-2 lg:px-56 flex-grow h-full w-full",children:Object(n.jsx)("main",{className:"h-full",children:t})}),Object(n.jsx)("footer",{className:"mt-auto flex justify-center py-2",children:Object(n.jsxs)("p",{className:"text-sm text-gray-600 sm:ml-4 sm:pl-4 sm:py-2 sm:mt-0 mt-4",children:["\xa9 2021 PERN Store \u2014",Object(n.jsx)("a",{href:"https://github.com/dhatguy",className:"text-gray-500 ml-1",target:"_blank",rel:"noopener noreferrer",children:"@dhatGuy"})]})})]})]})}},20:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return f}));var n=r(0),a=r(12),c=r(9),s=r(4),i=r.n(s),o=r(6),l=r(5),u=r(21),d=new function e(){var t=this;Object(u.a)(this,e),this.isExist=function(e){return!!t.getItem(e)},this.getItems=function(){return JSON.parse(localStorage.getItem("__cart"))||[]},this.getItem=function(e){return t.getItems().find((function(t){return t.product_id===e}))},this.saveItems=function(e){return localStorage.setItem("__cart",JSON.stringify(e))},this.removeItem=function(e){return t.saveItems(t.getItems().filter((function(t){return t.product_id!==e})))},this.incrementQuantity=function(e){return t.saveItems(t.getItems().map((function(t){return e===t.product_id&&(t.quantity+=1,t.subtotal=t.price*t.quantity),t})))},this.decrementQuantity=function(e){return t.saveItems(t.getItems().map((function(t){return e===t.product_id&&(0===t.quantity?t.quantity=0:t.quantity-=1,t.subtotal=t.price*t.quantity),t})))},this.addItem=function(e,r){t.isExist(e.product_id)?t.saveItems(t.getItems().map((function(t){return e.product_id===t.product_id&&(t.quantity+=r||1),t}))):(e.quantity=1,e.subtotal=e.price,t.saveItems([].concat(Object(c.a)(t.getItems()),[e])))},this.clearCart=function(){return localStorage.removeItem("__cart")}},j=r(1),b=r(25),m=r(8),p=new(function(){function e(){Object(u.a)(this,e)}return Object(b.a)(e,[{key:"getCart",value:function(){return m.a.get("/cart")}},{key:"addToCart",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/cart/add",{product_id:t,quantity:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"removeFromCart",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("/cart/delete",{data:{product_id:Number(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"increment",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.a.put("/cart/increment",{product_id:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"decrement",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.a.put("/cart/decrement",{product_id:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),x=r(17),O=Object(j.createContext)(),h=function(e){var t=e.children,r=Object(j.useState)(),s=Object(l.a)(r,2),u=s[0],b=s[1],m=Object(j.useState)(0),h=Object(l.a)(m,2),f=h[0],g=h[1],v=Object(j.useState)(0),y=Object(l.a)(v,2),w=y[0],N=y[1],k=Object(x.b)().isLoggedIn,S=Object(j.useState)(!1),C=Object(l.a)(S,2),I=C[0],T=C[1];Object(j.useEffect)((function(){if(T(!0),k){(function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.getItems().map((function(e){var t=e.product_id,r=e.quantity;return p.addToCart(t,r)})),e.next=3,Promise.all(t);case 3:d.clearCart(),p.getCart().then((function(e){b(null===e||void 0===e?void 0:e.data),T(!1)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}else{var e=d.getItems();if(null===e)return;b({items:Object(c.a)(e)}),T(!1)}}),[k]),Object(j.useEffect)((function(){var e,t=null===u||void 0===u||null===(e=u.items)||void 0===e?void 0:e.reduce((function(e,t){return e+Number(t.quantity)}),0),r=null===u||void 0===u?void 0:u.items.reduce((function(e,t){return e+Number(t.subtotal)}),0);g(r),N(t)}),[u]);var _=function(){var e=Object(o.a)(i.a.mark((function e(t,r){var n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=14;break}return e.prev=1,e.next=4,p.addToCart(t.product_id,r);case 4:n=e.sent,s=n.data,b({items:Object(c.a)(s.data)}),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",e.t0);case 12:e.next=16;break;case 14:d.addItem(t,1),b(Object(a.a)(Object(a.a)({},u),{},{items:d.getItems()}));case 16:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}(),P=function(){var e=Object(o.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=8;break}return e.next=3,p.increment(t);case 3:return r=e.sent,b(Object(a.a)(Object(a.a)({},u),{},{items:r.data})),e.abrupt("return",r);case 8:d.incrementQuantity(t),b(Object(a.a)(Object(a.a)({},u),{},{items:d.getItems()}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(o.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=8;break}return e.next=3,p.decrement(t);case 3:return r=e.sent,b(Object(a.a)(Object(a.a)({},u),{},{items:r.data})),e.abrupt("return",r);case 8:d.decrementQuantity(t),b(Object(a.a)(Object(a.a)({},u),{},{items:d.getItems()}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(O.Provider,{value:{isLoading:I,cartData:u,setCartData:b,addItem:_,deleteItem:function(e){if(k){var t=u.items;p.removeFromCart(e).then((function(){var r=t.filter((function(t){return t.product_id!==e}));b(Object(a.a)(Object(a.a)({},u),{},{items:r}))}))}else d.removeItem(e),b(Object(a.a)(Object(a.a)({},u),{},{items:d.getItems()}))},increment:P,decrement:E,cartTotal:w,cartSubtotal:f},children:t})},f=function(){var e=Object(j.useContext)(O);if(void 0===e)throw new Error("useCart must be used within a CartProvider");return e}},22:function(e,t,r){"use strict";var n=r(4),a=r.n(n),c=r(6),s=r(21),i=r(25),o=r(8),l=function(){function e(){Object(s.a)(this,e)}return Object(i.a)(e,[{key:"login",value:function(){var e=Object(c.a)(a.a.mark((function e(t,r){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/auth/login",{email:t,password:r});case 2:return n=e.sent,c=n.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"googleLogin",value:function(){var e=Object(c.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/auth/google",{token:t});case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("expiresAt")}},{key:"forgotPassword",value:function(e){return o.a.post("/auth/forgot-password",{email:e})}},{key:"checkToken",value:function(e,t){return o.a.post("auth/check-token",{token:e,email:t})}},{key:"resetPassword",value:function(e,t,r,n){return o.a.post("auth/reset-password",{token:e,email:t,password:r,password2:n})}},{key:"register",value:function(e,t,r){return o.a.post("auth/signup",{username:e,email:t,password:r})}},{key:"getCurrentUser",value:function(){return o.a.get("/users/profile")}}]),e}();t.a=new l},30:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){return new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(e)}},33:function(e,t,r){"use strict";var n=r(56);t.a=Object(n.a)()},34:function(e,t,r){"use strict";var n=r(0),a=(r(1),r(59)),c=r.n(a);t.a=function(e){var t=e.css,r=e.size,a=e.loading;return Object(n.jsx)("div",{className:"absolute transform -translate-x-2/4 -translate-y-2/4 left-2/4 top-2/4",children:Object(n.jsx)(c.a,{css:t,size:r,color:"#123abc",loading:a})})}},49:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return d}));var n=r(0),a=r(5),c=r(1),s=c.createContext,i=c.useState,o=c.useContext,l=s(),u=function(e){var t=e.children,r=i(null),c=Object(a.a)(r,2),s=c[0],o=c[1];return Object(n.jsx)(l.Provider,{value:{orders:s,setOrders:o},children:t})},d=function(){var e=o(l);if(void 0===e)throw new Error("useOrders must be used within a OrderProvider");return e}},50:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return l}));var n=r(0),a=r(5),c=r(1),s=r(51),i=Object(c.createContext)(),o=function(e){var t=e.children,r=Object(c.useState)(null),o=Object(a.a)(r,2),l=o[0],u=o[1],d=Object(c.useState)(!1),j=Object(a.a)(d,2),b=j[0],m=j[1],p=Object(c.useState)(1),x=Object(a.a)(p,2),O=x[0],h=x[1];return Object(c.useEffect)((function(){m(!0),s.a.getProducts(O).then((function(e){u(e.data),m(!1)}))}),[O]),Object(n.jsx)(i.Provider,{value:{products:l,setProducts:u,isLoading:b,setIsLoading:m,page:O,setPage:h},children:t})},l=function(){var e=Object(c.useContext)(i);if(void 0===e)throw new Error("useProduct must be used within a ProductProvider");return e}},51:function(e,t,r){"use strict";var n=r(21),a=r(25),c=r(8),s=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,[{key:"getProducts",value:function(e,t){return c.a.get("/products/?page=".concat(e))}},{key:"getProduct",value:function(e){return c.a.get("/products/".concat(e))}},{key:"getProductByName",value:function(e){return c.a.get("/products/".concat(e))}}]),e}();t.a=new s},8:function(e,t,r){"use strict";var n=r(55),a=r.n(n),c=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,s=a.a.create({baseURL:c,withCredentials:!0});s.interceptors.request.use((function(e){var t=JSON.parse(localStorage.getItem("token"));return t&&(e.headers["auth-token"]=t),e}),(function(e){return Promise.reject(e)})),t.a=s},97:function(e,t,r){},98:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(2),c=r(20),s=r(49),i=r(50),o=r(5),l=r(1),u=l.createContext,d=(l.useContext,l.useState),j=u(),b=function(e){var t=e.children,r=d(null),a=Object(o.a)(r,2),c=a[0],s=a[1];return Object(n.jsx)(j.Provider,{value:{reviews:c,setReviews:s},children:t})},m=r(17),p=r(1),x=r(37),O=r.n(x),h=r(35),f=r(34),g=r(33),v=r(18),y=r(30),w=function(e){var t=e.item,r=Object(c.b)(),s=r.decrement,i=r.increment,o=r.deleteItem;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(a.TableCell,{children:t.name}),Object(n.jsx)(a.TableCell,{children:Object(y.a)(t.price)}),Object(n.jsxs)(a.TableCell,{className:"flex items-center",children:[Object(n.jsx)(a.Button,{size:"small",layout:"outline",disabled:1===t.quantity,onClick:function(){s(t.product_id)},children:"-"}),Object(n.jsx)("span",{className:"mr-2 ml-2",children:t.quantity}),Object(n.jsx)(a.Button,{size:"small",layout:"outline",onClick:function(){i(t.product_id)},children:"+"})]}),Object(n.jsx)(a.TableCell,{children:Object(y.a)(t.subtotal)}),Object(n.jsx)(a.TableCell,{children:Object(n.jsx)(a.Button,{layout:"Link",onClick:function(){return o(t.product_id)},children:Object(n.jsx)("span",{children:"X"})})})]})},N=r(13),k=r(99),S=function(){var e,t,r=Object(c.b)(),s=r.cartData,i=r.isLoading,o=r.cartSubtotal;return 0===(null===s||void 0===s||null===(e=s.items)||void 0===e?void 0:e.length)?Object(n.jsxs)(v.a,{title:"Cart",loading:i,children:[Object(n.jsx)("h1",{className:"my-10 text-center text-4xl font-semibold",children:"Shopping Cart"}),Object(n.jsxs)("div",{className:"h-full flex flex-col justify-center items-center",children:[Object(n.jsx)(k.a,{size:150}),Object(n.jsx)("p",{children:"Cart is empty"}),Object(n.jsx)(a.Button,{tag:N.a,to:"/",children:"Continue shopping"})]})]}):Object(n.jsxs)(v.a,{loading:i||void 0===s,children:[Object(n.jsx)("h1",{className:"my-10 text-center text-4xl font-semibold",children:"Shopping Cart"}),Object(n.jsxs)(a.TableContainer,{children:[Object(n.jsxs)(a.Table,{children:[Object(n.jsx)(a.TableHeader,{children:Object(n.jsxs)(a.TableRow,{children:[Object(n.jsx)(a.TableCell,{children:"Product"}),Object(n.jsx)(a.TableCell,{children:"Amount"}),Object(n.jsx)(a.TableCell,{children:"Quantity"}),Object(n.jsx)(a.TableCell,{children:"Total"}),Object(n.jsx)(a.TableCell,{children:"Remove"})]})}),Object(n.jsx)(a.TableBody,{children:null===s||void 0===s||null===(t=s.items)||void 0===t?void 0:t.map((function(e){return Object(n.jsx)(a.TableRow,{children:Object(n.jsx)(w,{item:e})},e.product_id)}))})]}),Object(n.jsxs)(a.TableFooter,{className:"flex flex-col justify-end items-end",children:[Object(n.jsxs)("div",{className:"mb-2",children:["Total: ",Object(y.a)(o)]}),Object(n.jsx)(a.Button,{tag:N.a,to:{pathname:"/cart/checkout",state:{fromCartPage:!0}},children:"Checkout"})]})]})]})},C=r(4),I=r.n(C),T=r(6),_=r(19),P=r(22),E=r(24),L=r.n(E),q=r(26),F=function(){var e=Object(p.useState)(!1),t=Object(o.a)(e,2),r=t[0],c=t[1],s=Object(p.useState)(""),i=Object(o.a)(s,2),l=i[0],u=i[1],d=Object(p.useState)(!1),j=Object(o.a)(d,2),b=j[0],m=j[1],x=Object(q.a)(),O=x.handleSubmit,h=x.register,f=x.errors,g=function(e){u(""),m(!0),P.a.forgotPassword(e.email).then((function(e){"OK"===e.data.status&&(m(!1),_.b.success("Email has been sent successfully."),c(!1))})).catch((function(e){m(!1),u(e.response.data.message)}))};return Object(n.jsx)("div",{children:Object(n.jsxs)(n.Fragment,{children:[r&&Object(n.jsx)(a.Backdrop,{}),Object(n.jsx)("span",{onClick:function(){return c(!r)},className:"mb-1 text-sm text-purple-700 cursor-pointer",children:"Forgot password?"}),Object(n.jsx)(a.Modal,{isOpen:r,onClose:function(){u(""),c(!r)},children:Object(n.jsxs)("form",{onSubmit:O(g),children:[Object(n.jsx)(a.ModalHeader,{children:"Forgot Password"}),Object(n.jsxs)(a.ModalBody,{children:[Object(n.jsxs)(a.Label,{children:[Object(n.jsx)("span",{className:"font-semibold",children:"Email"}),Object(n.jsx)(a.Input,{name:"email",className:"mt-1 border py-2 pl-2",valid:!0,type:"email",inputMode:"email",ref:h({required:"Email required",pattern:{value:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,message:"Email not valid"}})})]}),f.email&&"required"===f.email.type&&Object(n.jsx)(a.HelperText,{className:"mt-2",valid:!1,children:f.email.message}),f.email&&"pattern"===f.email.type&&Object(n.jsx)(a.HelperText,{className:"mt-2",valid:!1,children:f.email.message}),l&&Object(n.jsx)(a.HelperText,{className:"mt-2",valid:!1,children:l})]}),Object(n.jsx)(a.ModalFooter,{children:Object(n.jsx)(a.Button,{onClick:O(g),disabled:b,className:"w-full sm:w-auto",children:b?Object(n.jsx)(L.a,{size:10,color:"#0a138b"}):"Send email"})})]})})]})})},D=r(61),H=r.n(D),R=r(10),B=function(){var e=Object(m.b)(),t=e.isLoggedIn,r=e.setUserState,c=Object(p.useState)(""),s=Object(o.a)(c,2),i=s[0],l=s[1],u=Object(p.useState)(!1),d=Object(o.a)(u,2),j=d[0],b=d[1],x=Object(p.useState)(!1),O=Object(o.a)(x,2),h=O[0],f=O[1],g=Object(R.h)().state,y=Object(q.a)(),w=y.register,k=y.handleSubmit,S=y.errors,C=function(){var e=Object(T.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.a.googleLogin(t.tokenId);case 3:n=e.sent,_.b.success("Login successful \ud83d\udd13"),setTimeout((function(){r(n),f(!0),b(!1)}),1500),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),b(!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(T.a)(I.a.mark((function e(t){var n,a,c,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,e.prev=1,l(""),b(!0),e.next=6,P.a.login(n,a);case 6:c=e.sent,_.b.success("Login successful \ud83d\udd13"),setTimeout((function(){r(c),f(!0),b(!1)}),1500),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),b(!1),l(null===(s=e.t0.response)||void 0===s?void 0:s.data.message);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return h||t?Object(n.jsx)(R.a,{to:(null===g||void 0===g?void 0:g.from)||"/"}):Object(n.jsx)(v.a,{title:"Login",children:Object(n.jsx)("div",{className:"flex items-center justify-center m-auto mt-20",children:Object(n.jsxs)("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 flex flex-col w-full md:w-1/2",onSubmit:k(E),children:[Object(n.jsx)("h1",{className:"text-center text-4xl my-4",children:"Continue Shopping"}),Object(n.jsxs)("div",{className:"",children:[Object(n.jsx)(a.Label,{className:"block text-grey-darker text-sm font-bold mb-2",children:Object(n.jsx)("span",{children:"Email"})}),Object(n.jsx)(a.Input,{className:"shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"email",name:"email",ref:w({required:!0,pattern:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/}),placeholder:"Enter a valid email"})]}),S.email&&"required"===S.email.type&&Object(n.jsx)(a.HelperText,{className:"mt-1 italic",valid:!1,children:"Email required"}),S.email&&"pattern"===S.email.type&&Object(n.jsx)(a.HelperText,{className:"mt-1 italic",valid:!1,children:"Invalid email"}),Object(n.jsxs)("div",{className:"mt-4",children:[Object(n.jsx)(a.Label,{className:"block text-grey-darker text-sm font-bold mb-2",children:Object(n.jsx)("span",{children:"Password"})}),Object(n.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"password",name:"password",ref:w({required:!0})})]}),S.password&&"required"===S.password.type&&Object(n.jsx)(a.HelperText,{className:"mt-1 italic",valid:!1,children:"Password required"}),i&&Object(n.jsx)(a.HelperText,{className:"mt-1 italic",valid:!1,children:i}),Object(n.jsx)("div",{className:"mt-4",children:Object(n.jsx)(F,{})}),Object(n.jsx)(a.Button,{type:"submit",disabled:j,children:j?Object(n.jsx)(L.a,{color:"#0a138b",size:10,loading:j}):"Login"}),Object(n.jsx)(H.a,{className:"my-4 flex justify-center",clientId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_CLIENT_ID,buttonText:"Log in with Google",onSuccess:C,onFailure:C,cookiePolicy:"single_host_origin"}),Object(n.jsxs)("p",{className:"text-sm mt-4",children:["Don't have an account?"," ",Object(n.jsx)(N.a,{to:"/signup",className:"font-bold",children:"Sign Up"})]})]})})})},U=r(8),z=function(){var e=Object(p.useState)(!1),t=Object(o.a)(e,2),r=t[0],c=t[1],s=Object(p.useState)(""),i=Object(o.a)(s,2),l=i[0],u=i[1],d=Object(R.h)().state,j=Object(m.b)(),b=j.isLoggedIn,x=j.setUserState,O=Object(q.a)(),h=O.register,f=O.errors,g=O.handleSubmit,y=O.watch,w=Object(p.useRef)({});w.current=y("password","");return b?Object(n.jsx)(R.a,{to:(null===d||void 0===d?void 0:d.from)||"/"}):Object(n.jsx)(v.a,{title:"Create account",children:Object(n.jsx)("div",{className:"flex items-center justify-center mx-auto mt-20 ",children:Object(n.jsxs)("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 flex flex-col w-full md:w-1/2 mx-2",onSubmit:g((function(e){var t=e.password,n=e.password2,a=e.username,s=e.name,i=e.email;u(""),t===n?(c(!r),U.a.post("/auth/signup",{username:a,email:i,password:t,fullname:s}).then((function(e){var t=e.data;u(""),_.b.success("Account created successfully."),setTimeout((function(){x(t),c(!r)}),1e3)})).catch((function(e){var t=e.response;c(!1),u(t.data.message)}))):u("Password doesn't match ")})),children:[Object(n.jsx)("h1",{className:"text-center text-4xl",children:"Create Account"}),Object(n.jsxs)("div",{className:"mt-4",children:[Object(n.jsx)(a.Label,{className:"block text-grey-darker text-sm font-bold mb-2",children:Object(n.jsx)("span",{children:"Username"})}),Object(n.jsx)(a.Input,{className:"shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",name:"username",ref:h({minLength:{value:4,message:"Username must be greater than 3 characters"},required:"Username is required"})})]}),f.username&&"required"===f.username.type&&Object(n.jsx)(a.HelperText,{className:"pt-2",valid:!1,children:f.username.message}),f.username&&"minLength"===f.username.type&&Object(n.jsx)(a.HelperText,{className:"pt-2",valid:!1,children:f.username.message}),Object(n.jsxs)("div",{className:"mt-4",children:[Object(n.jsx)(a.Label,{className:"block text-grey-darker text-sm font-bold mb-2",children:Object(n.jsx)("span",{children:"Fullname"})}),Object(n.jsx)(a.Input,{className:"shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"text",name:"name",ref:h({required:"Name cannot be empty",minLength:{value:6,message:"Name must be greater than 5 characters"}})})]}),f.name&&"required"===f.name.type&&Object(n.jsx)(a.HelperText,{className:"pt-2",valid:!1,children:f.name.message}),f.name&&"minLength"===f.name.type&&Object(n.jsx)(a.HelperText,{className:"pt-2",valid:!1,children:f.name.message}),Object(n.jsxs)("div",{className:"mt-4",children:[Object(n.jsx)(a.Label,{className:"block text-grey-darker text-sm font-bold mb-2",children:Object(n.jsx)("span",{children:"Email"})}),Object(n.jsx)(a.Input,{className:"shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"email",name:"email",ref:h({required:"Email required",pattern:{value:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,message:"Email not valid"}})})]}),f.email&&"required"===f.email.type&&Object(n.jsx)(a.HelperText,{className:"pt-2",valid:!1,children:f.email.message}),f.email&&"pattern"===f.email.type&&Object(n.jsx)(a.HelperText,{className:"pt-2",valid:!1,children:f.email.message}),Object(n.jsxs)("div",{className:"mt-4",children:[Object(n.jsx)(a.Label,{className:"block text-grey-darker text-sm font-bold mb-2",children:Object(n.jsx)("span",{children:"Password"})}),Object(n.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"password",name:"password",ref:h({required:"Password required",minLength:{value:6,message:"Password must be greater than 5 characters"}})})]}),f.password&&"required"===f.password.type&&Object(n.jsx)(a.HelperText,{className:"pt-2",valid:!1,children:f.password.message}),f.password&&"pattern"===f.password.type&&Object(n.jsx)(a.HelperText,{className:"pt-2",valid:!1,children:f.password.message}),Object(n.jsxs)("div",{className:"mt-4",children:[Object(n.jsx)(a.Label,{className:"block text-grey-darker text-sm font-bold mb-2",children:Object(n.jsx)("span",{children:"Confirm Password"})}),Object(n.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker",type:"password",name:"password2",ref:h({validate:function(e){return e===w.current||"Passwords do not match"}})}),f.password2&&Object(n.jsx)(a.HelperText,{className:"pt-2",valid:!1,children:f.password2.message})]}),Object(n.jsx)(a.Button,{type:"submit",className:"mt-4",children:r?Object(n.jsx)(L.a,{color:"#0a138b",size:10,loading:r}):"Create Account"}),l&&Object(n.jsx)(a.HelperText,{className:"pt-2",valid:!1,children:l}),Object(n.jsxs)("p",{className:"text-sm mt-4",children:["Have an account?"," ",Object(n.jsx)(N.a,{to:"/login",className:"font-bold",children:"Login"})]})]})})})},A=r(12),J=r(62),K=function(e){var t=e.children,r=Object(J.a)(e,["children"]),a=Object(m.b)().isLoggedIn;return Object(n.jsx)(R.b,Object(A.a)(Object(A.a)({},r),{},{render:function(e){var r=e.location;return a?t:Object(n.jsx)(R.a,{to:{pathname:"/login",state:{from:r}}})}}))},W=Object(p.lazy)((function(){return r.e(4).then(r.bind(null,112))})),G=Object(p.lazy)((function(){return Promise.all([r.e(0),r.e(7)]).then(r.bind(null,113))})),M=Object(p.lazy)((function(){return Promise.all([r.e(0),r.e(8)]).then(r.bind(null,119))})),Q=Object(p.lazy)((function(){return r.e(11).then(r.bind(null,120))})),$=Object(p.lazy)((function(){return Promise.all([r.e(5),r.e(6)]).then(r.bind(null,117))})),V=Object(p.lazy)((function(){return r.e(12).then(r.bind(null,121))})),X=Object(p.lazy)((function(){return r.e(9).then(r.bind(null,118))})),Y=Object(p.lazy)((function(){return r.e(10).then(r.bind(null,122))}));var Z=function(){return Object(n.jsx)(R.c,{history:g.a,children:Object(n.jsx)(p.Suspense,{fallback:Object(n.jsx)(v.a,{children:Object(n.jsx)(f.a,{size:100})}),children:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(_.a,{position:"top-right"}),Object(n.jsxs)(R.d,{children:[Object(n.jsx)(K,{exact:!0,path:"/profile",children:Object(n.jsx)(X,{})}),Object(n.jsx)(R.b,{path:"/signup",children:Object(n.jsx)(z,{})}),Object(n.jsx)(R.b,{path:"/login",children:Object(n.jsx)(B,{})}),Object(n.jsx)(R.b,{exact:!0,path:["/","/products"],children:Object(n.jsx)(Q,{})}),Object(n.jsx)(R.b,{exact:!0,path:"/products/:id/",children:Object(n.jsx)(W,{})}),Object(n.jsx)(K,{exact:!0,path:"/cart/checkout",children:Object(n.jsx)($,{})}),Object(n.jsx)(K,{exact:!0,path:"/cart/success",children:Object(n.jsx)(Y,{})}),Object(n.jsx)(K,{exact:!0,path:"/orders",children:Object(n.jsx)(M,{})}),Object(n.jsx)(K,{exact:!0,path:"/orders/:id/",children:Object(n.jsx)(G,{})}),Object(n.jsx)(R.b,{path:"/cart",children:Object(n.jsx)(S,{})}),Object(n.jsx)(R.b,{path:"/reset-password",children:Object(n.jsx)(V,{})}),Object(n.jsx)(R.b,{path:"*",children:Object(n.jsx)("h1",{children:"404 Error Found"})})]})]})})})},ee=function(e){e&&e instanceof Function&&r.e(13).then(r.bind(null,115)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};r(97);O.a.render(Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(h.b,{children:Object(n.jsx)(a.Windmill,{children:Object(n.jsx)(m.a,{children:Object(n.jsx)(i.a,{children:Object(n.jsx)(b,{children:Object(n.jsx)(c.a,{children:Object(n.jsx)(s.a,{children:Object(n.jsx)(Z,{})})})})})})})})}),document.getElementById("root")),ee()}},[[98,2,3]]]);
//# sourceMappingURL=main.71760224.chunk.js.map