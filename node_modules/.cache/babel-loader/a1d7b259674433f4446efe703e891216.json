{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/xiaxiaoyu/Desktop/javascript/dbms project/PHONE_STORE_FE/src/pages/Checkout.jsx\",\n    _s = $RefreshSig$();\n\nimport Layout from \"layout/Layout\";\nimport React, { useEffect, useState } from \"react\";\nimport AddressForm from \"components/AddressForm\";\nimport PaymentForm from \"components/PaymentForm\";\nimport { useHistory, useLocation } from \"react-router\";\nimport { useCart } from \"context/CartContext\";\n\nconst Checkout = () => {\n  _s();\n\n  const [activeStep, setActiveStep] = useState(0);\n  const [addressData, setAddressData] = useState();\n  const {\n    state\n  } = useLocation();\n  const history = useHistory();\n  const {\n    cartData\n  } = useCart();\n  useEffect(() => {\n    if (!(state === null || state === void 0 ? void 0 : state.fromCartPage)) {\n      return history.push(\"/cart\");\n    }\n\n    if (cartData.items.length === 0) {\n      return history.push(\"/cart\");\n    }\n  }, [cartData, history, state]);\n\n  const nextStep = () => setActiveStep(prevStep => setActiveStep(prevStep + 1));\n\n  const previousStep = () => setActiveStep(prevStep => setActiveStep(prevStep - 1));\n\n  const next = data => {\n    setAddressData(data);\n    nextStep();\n  };\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col justify-center items-center mt-10\",\n      children: activeStep === 0 ? /*#__PURE__*/_jsxDEV(AddressForm, {\n        next: next\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(PaymentForm, {\n        nextStep: nextStep,\n        previousStep: previousStep,\n        addressData: addressData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Checkout, \"usuAxQjGvW1s2TJ+DU48j6DEdwg=\", false, function () {\n  return [useLocation, useHistory, useCart];\n});\n\n_c = Checkout;\nexport default Checkout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"sources":["/Users/xiaxiaoyu/Desktop/javascript/dbms project/PHONE_STORE_FE/src/pages/Checkout.jsx"],"names":["Layout","React","useEffect","useState","AddressForm","PaymentForm","useHistory","useLocation","useCart","Checkout","activeStep","setActiveStep","addressData","setAddressData","state","history","cartData","fromCartPage","push","items","length","nextStep","prevStep","previousStep","next","data"],"mappings":";;;;;AAAA,OAAOA,MAAP,MAAmB,eAAnB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,SAASC,UAAT,EAAqBC,WAArB,QAAwC,cAAxC;AACA,SAASC,OAAT,QAAwB,qBAAxB;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AAAA;;AACrB,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BR,QAAQ,CAAC,CAAD,CAA5C;AACA,QAAM,CAACS,WAAD,EAAcC,cAAd,IAAgCV,QAAQ,EAA9C;AACA,QAAM;AAAEW,IAAAA;AAAF,MAAYP,WAAW,EAA7B;AACA,QAAMQ,OAAO,GAAGT,UAAU,EAA1B;AACA,QAAM;AAAEU,IAAAA;AAAF,MAAeR,OAAO,EAA5B;AAEAN,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,EAACY,KAAD,aAACA,KAAD,uBAACA,KAAK,CAAEG,YAAR,CAAJ,EAA0B;AACxB,aAAOF,OAAO,CAACG,IAAR,CAAa,OAAb,CAAP;AACD;;AAED,QAAIF,QAAQ,CAACG,KAAT,CAAeC,MAAf,KAA0B,CAA9B,EAAiC;AAC/B,aAAOL,OAAO,CAACG,IAAR,CAAa,OAAb,CAAP;AACD;AACF,GARQ,EAQN,CAACF,QAAD,EAAWD,OAAX,EAAoBD,KAApB,CARM,CAAT;;AAUA,QAAMO,QAAQ,GAAG,MACfV,aAAa,CAAEW,QAAD,IAAcX,aAAa,CAACW,QAAQ,GAAG,CAAZ,CAA5B,CADf;;AAEA,QAAMC,YAAY,GAAG,MACnBZ,aAAa,CAAEW,QAAD,IAAcX,aAAa,CAACW,QAAQ,GAAG,CAAZ,CAA5B,CADf;;AAGA,QAAME,IAAI,GAAIC,IAAD,IAAU;AACrBZ,IAAAA,cAAc,CAACY,IAAD,CAAd;AACAJ,IAAAA,QAAQ;AACT,GAHD;;AAIA,sBACE,QAAC,MAAD;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,iDAAf;AAAA,gBACGX,UAAU,KAAK,CAAf,gBACC,QAAC,WAAD;AAAa,QAAA,IAAI,EAAEc;AAAnB;AAAA;AAAA;AAAA;AAAA,cADD,gBAGC,QAAC,WAAD;AACE,QAAA,QAAQ,EAAEH,QADZ;AAEE,QAAA,YAAY,EAAEE,YAFhB;AAGE,QAAA,WAAW,EAAEX;AAHf;AAAA;AAAA;AAAA;AAAA;AAJJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAeD,CAzCD;;GAAMH,Q;UAGcF,W,EACFD,U,EACKE,O;;;KALjBC,Q;AA2CN,eAAeA,QAAf","sourcesContent":["import Layout from \"layout/Layout\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport AddressForm from \"components/AddressForm\";\r\nimport PaymentForm from \"components/PaymentForm\";\r\nimport { useHistory, useLocation } from \"react-router\";\r\nimport { useCart } from \"context/CartContext\";\r\n\r\nconst Checkout = () => {\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [addressData, setAddressData] = useState();\r\n  const { state } = useLocation();\r\n  const history = useHistory();\r\n  const { cartData } = useCart();\r\n\r\n  useEffect(() => {\r\n    if (!state?.fromCartPage) {\r\n      return history.push(\"/cart\");\r\n    }\r\n\r\n    if (cartData.items.length === 0) {\r\n      return history.push(\"/cart\");\r\n    }\r\n  }, [cartData, history, state]);\r\n\r\n  const nextStep = () =>\r\n    setActiveStep((prevStep) => setActiveStep(prevStep + 1));\r\n  const previousStep = () =>\r\n    setActiveStep((prevStep) => setActiveStep(prevStep - 1));\r\n\r\n  const next = (data) => {\r\n    setAddressData(data);\r\n    nextStep();\r\n  };\r\n  return (\r\n    <Layout>\r\n      <div className=\"flex flex-col justify-center items-center mt-10\">\r\n        {activeStep === 0 ? (\r\n          <AddressForm next={next} />\r\n        ) : (\r\n          <PaymentForm\r\n            nextStep={nextStep}\r\n            previousStep={previousStep}\r\n            addressData={addressData}\r\n          />\r\n        )}\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n"]},"metadata":{},"sourceType":"module"}