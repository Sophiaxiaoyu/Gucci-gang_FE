{"ast":null,"code":"import { registerAction, registerInteraction } from '@antv/g2';\nimport { ButtonAction } from './actions/reset-button';\nregisterAction('brush-reset-button', ButtonAction, {\n  name: 'brush-reset-button'\n});\nregisterInteraction('filter-action', {});\n/**\n * G2 已经内置了 brush、brush-x、brush-y 等交互，其它：\n *\n * 1. element-range-highlight 是否可用重命名为 brush-highlight？(mask 可以移动)\n * 2. brush-visible 与 brush 的区别是？\n */\n\nfunction isPointInView(context) {\n  return context.isInPlot();\n}\n/**\n * 获取 交互 start 阶段的相关配置\n */\n\n\nexport function getInteractionCfg(interactionType, brushType, options) {\n  var _a = options || {},\n      mask = _a.mask,\n      isStartEnable = _a.isStartEnable;\n\n  var maskType = brushType || 'rect';\n\n  switch (interactionType) {\n    case 'brush':\n      return {\n        showEnable: [{\n          trigger: 'plot:mouseenter',\n          action: 'cursor:crosshair',\n          isEnable: isStartEnable || function () {\n            return true;\n          }\n        }, {\n          trigger: 'plot:mouseleave',\n          action: 'cursor:default'\n        }],\n        start: [{\n          trigger: 'mousedown',\n          isEnable: isStartEnable || isPointInView,\n          action: ['brush:start', maskType + \"-mask:start\", maskType + \"-mask:show\"],\n          // 对应第二个action的参数\n          arg: [null, {\n            maskStyle: mask === null || mask === void 0 ? void 0 : mask.style\n          }]\n        }],\n        processing: [{\n          trigger: 'mousemove',\n          isEnable: isPointInView,\n          action: [maskType + \"-mask:resize\"]\n        }],\n        end: [{\n          trigger: 'mouseup',\n          isEnable: isPointInView,\n          action: ['brush:filter', 'brush:end', maskType + \"-mask:end\", maskType + \"-mask:hide\", 'brush-reset-button:show']\n        }],\n        rollback: [{\n          trigger: 'brush-reset-button:click',\n          action: ['brush:reset', 'brush-reset-button:hide', 'cursor:crosshair']\n        }]\n      };\n\n    case 'brush-highlight':\n      return {\n        showEnable: [{\n          trigger: 'plot:mouseenter',\n          action: 'cursor:crosshair',\n          isEnable: isStartEnable || function () {\n            return true;\n          }\n        }, {\n          trigger: 'plot:mousemove',\n          action: 'cursor:crosshair',\n          isEnable: isStartEnable || function () {\n            return true;\n          }\n        }, {\n          trigger: 'plot:mousemove',\n          action: 'cursor:default',\n          isEnable: function (context) {\n            return isStartEnable ? !isStartEnable(context) : false;\n          }\n        }, {\n          trigger: 'mask:mouseenter',\n          action: 'cursor:move',\n          isEnable: isStartEnable || function () {\n            return true;\n          }\n        }, {\n          trigger: 'plot:mouseleave',\n          action: 'cursor:default'\n        }, {\n          trigger: 'mask:mouseleave',\n          action: 'cursor:crosshair'\n        }],\n        start: [{\n          trigger: 'plot:mousedown',\n          isEnable: isStartEnable || function (context) {\n            // 不要点击在 mask 上重新开始\n            return !context.isInShape('mask');\n          },\n          action: [maskType + \"-mask:start\", maskType + \"-mask:show\"],\n          // 对应第 1 个action的参数\n          arg: [{\n            maskStyle: mask === null || mask === void 0 ? void 0 : mask.style\n          }]\n        }, {\n          trigger: 'mask:dragstart',\n          action: [maskType + \"-mask:moveStart\"]\n        }],\n        processing: [{\n          trigger: 'plot:mousemove',\n          action: [maskType + \"-mask:resize\"]\n        }, {\n          trigger: 'mask:drag',\n          action: [maskType + \"-mask:move\"]\n        }, {\n          trigger: 'mask:change',\n          action: ['element-range-highlight:highlight']\n        }],\n        end: [{\n          trigger: 'plot:mouseup',\n          action: [maskType + \"-mask:end\"]\n        }, {\n          trigger: 'mask:dragend',\n          action: [maskType + \"-mask:moveEnd\"]\n        }, {\n          trigger: 'document:mouseup',\n          isEnable: function (context) {\n            return !context.isInPlot();\n          },\n          action: ['element-range-highlight:clear', maskType + \"-mask:end\", maskType + \"-mask:hide\"]\n        }],\n        rollback: [{\n          trigger: 'dblclick',\n          action: ['element-range-highlight:clear', maskType + \"-mask:hide\"]\n        }]\n      };\n\n    case 'brush-x':\n      return {\n        showEnable: [{\n          trigger: 'plot:mouseenter',\n          action: 'cursor:crosshair',\n          isEnable: isStartEnable || function () {\n            return true;\n          }\n        }, {\n          trigger: 'plot:mouseleave',\n          action: 'cursor:default'\n        }],\n        start: [{\n          trigger: 'mousedown',\n          isEnable: isStartEnable || isPointInView,\n          action: ['brush-x:start', maskType + \"-mask:start\", maskType + \"-mask:show\"],\n          // 对应第二个action的参数\n          arg: [null, {\n            maskStyle: mask === null || mask === void 0 ? void 0 : mask.style\n          }]\n        }],\n        processing: [{\n          trigger: 'mousemove',\n          isEnable: isPointInView,\n          action: [maskType + \"-mask:resize\"]\n        }],\n        end: [{\n          trigger: 'mouseup',\n          isEnable: isPointInView,\n          action: ['brush-x:filter', 'brush-x:end', maskType + \"-mask:end\", maskType + \"-mask:hide\"]\n        }],\n        rollback: [{\n          trigger: 'dblclick',\n          action: ['brush-x:reset']\n        }]\n      };\n\n    case 'brush-x-highlight':\n      return {\n        showEnable: [{\n          trigger: 'plot:mouseenter',\n          action: 'cursor:crosshair',\n          isEnable: isStartEnable || function () {\n            return true;\n          }\n        }, {\n          trigger: 'mask:mouseenter',\n          action: 'cursor:move',\n          isEnable: isStartEnable || function () {\n            return true;\n          }\n        }, {\n          trigger: 'plot:mouseleave',\n          action: 'cursor:default'\n        }, {\n          trigger: 'mask:mouseleave',\n          action: 'cursor:crosshair'\n        }],\n        start: [{\n          trigger: 'plot:mousedown',\n          isEnable: isStartEnable || function (context) {\n            // 不要点击在 mask 上重新开始\n            return !context.isInShape('mask');\n          },\n          action: [maskType + \"-mask:start\", maskType + \"-mask:show\"],\n          // 对应第 1 个action的参数\n          arg: [{\n            maskStyle: mask === null || mask === void 0 ? void 0 : mask.style\n          }]\n        }, {\n          trigger: 'mask:dragstart',\n          action: [maskType + \"-mask:moveStart\"]\n        }],\n        processing: [{\n          trigger: 'plot:mousemove',\n          action: [maskType + \"-mask:resize\"]\n        }, {\n          trigger: 'mask:drag',\n          action: [maskType + \"-mask:move\"]\n        }, {\n          trigger: 'mask:change',\n          action: ['element-range-highlight:highlight']\n        }],\n        end: [{\n          trigger: 'plot:mouseup',\n          action: [maskType + \"-mask:end\"]\n        }, {\n          trigger: 'mask:dragend',\n          action: [maskType + \"-mask:moveEnd\"]\n        }, {\n          trigger: 'document:mouseup',\n          isEnable: function (context) {\n            return !context.isInPlot();\n          },\n          action: ['element-range-highlight:clear', maskType + \"-mask:end\", maskType + \"-mask:hide\"]\n        }],\n        rollback: [{\n          trigger: 'dblclick',\n          action: ['element-range-highlight:clear', maskType + \"-mask:hide\"]\n        }]\n      };\n\n    case 'brush-y':\n      return {\n        showEnable: [{\n          trigger: 'plot:mouseenter',\n          action: 'cursor:crosshair',\n          isEnable: isStartEnable || function () {\n            return true;\n          }\n        }, {\n          trigger: 'plot:mouseleave',\n          action: 'cursor:default'\n        }],\n        start: [{\n          trigger: 'mousedown',\n          isEnable: isStartEnable || isPointInView,\n          action: ['brush-y:start', maskType + \"-mask:start\", maskType + \"-mask:show\"],\n          // 对应第二个action的参数\n          arg: [null, {\n            maskStyle: mask === null || mask === void 0 ? void 0 : mask.style\n          }]\n        }],\n        processing: [{\n          trigger: 'mousemove',\n          isEnable: isPointInView,\n          action: [maskType + \"-mask:resize\"]\n        }],\n        end: [{\n          trigger: 'mouseup',\n          isEnable: isPointInView,\n          action: ['brush-y:filter', 'brush-y:end', maskType + \"-mask:end\", maskType + \"-mask:hide\"]\n        }],\n        rollback: [{\n          trigger: 'dblclick',\n          action: ['brush-y:reset']\n        }]\n      };\n\n    case 'brush-y-highlight':\n      return {\n        showEnable: [{\n          trigger: 'plot:mouseenter',\n          action: 'cursor:crosshair',\n          isEnable: isStartEnable || function () {\n            return true;\n          }\n        }, {\n          trigger: 'mask:mouseenter',\n          action: 'cursor:move',\n          isEnable: isStartEnable || function () {\n            return true;\n          }\n        }, {\n          trigger: 'plot:mouseleave',\n          action: 'cursor:default'\n        }, {\n          trigger: 'mask:mouseleave',\n          action: 'cursor:crosshair'\n        }],\n        start: [{\n          trigger: 'plot:mousedown',\n          isEnable: isStartEnable || function (context) {\n            // 不要点击在 mask 上重新开始\n            return !context.isInShape('mask');\n          },\n          action: [maskType + \"-mask:start\", maskType + \"-mask:show\"],\n          // 对应第 1 个action的参数\n          arg: [{\n            maskStyle: mask === null || mask === void 0 ? void 0 : mask.style\n          }]\n        }, {\n          trigger: 'mask:dragstart',\n          action: [maskType + \"-mask:moveStart\"]\n        }],\n        processing: [{\n          trigger: 'plot:mousemove',\n          action: [maskType + \"-mask:resize\"]\n        }, {\n          trigger: 'mask:drag',\n          action: [maskType + \"-mask:move\"]\n        }, {\n          trigger: 'mask:change',\n          action: ['element-range-highlight:highlight']\n        }],\n        end: [{\n          trigger: 'plot:mouseup',\n          action: [maskType + \"-mask:end\"]\n        }, {\n          trigger: 'mask:dragend',\n          action: [maskType + \"-mask:moveEnd\"]\n        }, {\n          trigger: 'document:mouseup',\n          isEnable: function (context) {\n            return !context.isInPlot();\n          },\n          action: ['element-range-highlight:clear', maskType + \"-mask:end\", maskType + \"-mask:hide\"]\n        }],\n        rollback: [{\n          trigger: 'dblclick',\n          action: ['element-range-highlight:clear', maskType + \"-mask:hide\"]\n        }]\n      };\n\n    default:\n      return {};\n  }\n} // 直接拷贝过来的\n\nregisterInteraction('brush', getInteractionCfg('brush')); // 复写 element-range-highlight interaction\n\nregisterInteraction('brush-highlight', getInteractionCfg('brush-highlight')); // 复写\n\nregisterInteraction('brush-x', getInteractionCfg('brush-x', 'x-rect')); // 复写\n\nregisterInteraction('brush-y', getInteractionCfg('brush-y', 'y-rect')); // 新增, x 框选高亮\n\nregisterInteraction('brush-x-highlight', getInteractionCfg('brush-x-highlight', 'x-rect')); // 新增, y 框选高亮\n\nregisterInteraction('brush-y-highlight', getInteractionCfg('brush-y-highlight', 'y-rect'));","map":{"version":3,"sources":["../../src/interactions/brush.ts"],"names":[],"mappings":"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","sourcesContent":["import { registerAction, registerInteraction } from '@antv/g2';\nimport { BrushCfg } from '../types';\nimport { ButtonAction } from './actions/reset-button';\n\nregisterAction('brush-reset-button', ButtonAction, {\n  name: 'brush-reset-button',\n});\n\nregisterInteraction('filter-action', {});\n\n/**\n * G2 已经内置了 brush、brush-x、brush-y 等交互，其它：\n *\n * 1. element-range-highlight 是否可用重命名为 brush-highlight？(mask 可以移动)\n * 2. brush-visible 与 brush 的区别是？\n */\n\nfunction isPointInView(context) {\n  return context.isInPlot();\n}\n\n/**\n * 获取 交互 start 阶段的相关配置\n */\nexport function getInteractionCfg(interactionType: string, brushType?: string, options?: BrushCfg) {\n  const { mask, isStartEnable } = options || {};\n  const maskType = brushType || 'rect';\n\n  switch (interactionType) {\n    case 'brush':\n      return {\n        showEnable: [\n          { trigger: 'plot:mouseenter', action: 'cursor:crosshair', isEnable: isStartEnable || (() => true) },\n          { trigger: 'plot:mouseleave', action: 'cursor:default' },\n        ],\n        start: [\n          {\n            trigger: 'mousedown',\n            isEnable: isStartEnable || isPointInView,\n            action: ['brush:start', `${maskType}-mask:start`, `${maskType}-mask:show`],\n            // 对应第二个action的参数\n            arg: [null, { maskStyle: mask?.style }],\n          },\n        ],\n        processing: [\n          {\n            trigger: 'mousemove',\n            isEnable: isPointInView,\n            action: [`${maskType}-mask:resize`],\n          },\n        ],\n        end: [\n          {\n            trigger: 'mouseup',\n            isEnable: isPointInView,\n            action: [\n              'brush:filter',\n              'brush:end',\n              `${maskType}-mask:end`,\n              `${maskType}-mask:hide`,\n              'brush-reset-button:show',\n            ],\n          },\n        ],\n        rollback: [\n          {\n            trigger: 'brush-reset-button:click',\n            action: ['brush:reset', 'brush-reset-button:hide', 'cursor:crosshair'],\n          },\n        ],\n      };\n    case 'brush-highlight':\n      return {\n        showEnable: [\n          { trigger: 'plot:mouseenter', action: 'cursor:crosshair', isEnable: isStartEnable || (() => true) },\n          { trigger: 'plot:mousemove', action: 'cursor:crosshair', isEnable: isStartEnable || (() => true) },\n          {\n            trigger: 'plot:mousemove',\n            action: 'cursor:default',\n            isEnable: (context) => (isStartEnable ? !isStartEnable(context) : false),\n          },\n          { trigger: 'mask:mouseenter', action: 'cursor:move', isEnable: isStartEnable || (() => true) },\n          { trigger: 'plot:mouseleave', action: 'cursor:default' },\n          { trigger: 'mask:mouseleave', action: 'cursor:crosshair' },\n        ],\n        start: [\n          {\n            trigger: 'plot:mousedown',\n            isEnable:\n              isStartEnable ||\n              ((context) => {\n                // 不要点击在 mask 上重新开始\n                return !context.isInShape('mask');\n              }),\n            action: [`${maskType}-mask:start`, `${maskType}-mask:show`],\n            // 对应第 1 个action的参数\n            arg: [{ maskStyle: mask?.style }],\n          },\n          {\n            trigger: 'mask:dragstart',\n            action: [`${maskType}-mask:moveStart`],\n          },\n        ],\n        processing: [\n          {\n            trigger: 'plot:mousemove',\n            action: [`${maskType}-mask:resize`],\n          },\n          {\n            trigger: 'mask:drag',\n            action: [`${maskType}-mask:move`],\n          },\n          {\n            trigger: 'mask:change',\n            action: ['element-range-highlight:highlight'],\n          },\n        ],\n        end: [\n          { trigger: 'plot:mouseup', action: [`${maskType}-mask:end`] },\n          { trigger: 'mask:dragend', action: [`${maskType}-mask:moveEnd`] },\n          {\n            trigger: 'document:mouseup',\n            isEnable(context) {\n              return !context.isInPlot();\n            },\n            action: ['element-range-highlight:clear', `${maskType}-mask:end`, `${maskType}-mask:hide`],\n          },\n        ],\n        rollback: [{ trigger: 'dblclick', action: ['element-range-highlight:clear', `${maskType}-mask:hide`] }],\n      };\n    case 'brush-x':\n      return {\n        showEnable: [\n          { trigger: 'plot:mouseenter', action: 'cursor:crosshair', isEnable: isStartEnable || (() => true) },\n          { trigger: 'plot:mouseleave', action: 'cursor:default' },\n        ],\n        start: [\n          {\n            trigger: 'mousedown',\n            isEnable: isStartEnable || isPointInView,\n            action: ['brush-x:start', `${maskType}-mask:start`, `${maskType}-mask:show`],\n            // 对应第二个action的参数\n            arg: [null, { maskStyle: mask?.style }],\n          },\n        ],\n        processing: [\n          {\n            trigger: 'mousemove',\n            isEnable: isPointInView,\n            action: [`${maskType}-mask:resize`],\n          },\n        ],\n        end: [\n          {\n            trigger: 'mouseup',\n            isEnable: isPointInView,\n            action: ['brush-x:filter', 'brush-x:end', `${maskType}-mask:end`, `${maskType}-mask:hide`],\n          },\n        ],\n        rollback: [{ trigger: 'dblclick', action: ['brush-x:reset'] }],\n      };\n    case 'brush-x-highlight':\n      return {\n        showEnable: [\n          { trigger: 'plot:mouseenter', action: 'cursor:crosshair', isEnable: isStartEnable || (() => true) },\n          { trigger: 'mask:mouseenter', action: 'cursor:move', isEnable: isStartEnable || (() => true) },\n          { trigger: 'plot:mouseleave', action: 'cursor:default' },\n          { trigger: 'mask:mouseleave', action: 'cursor:crosshair' },\n        ],\n        start: [\n          {\n            trigger: 'plot:mousedown',\n            isEnable:\n              isStartEnable ||\n              ((context) => {\n                // 不要点击在 mask 上重新开始\n                return !context.isInShape('mask');\n              }),\n            action: [`${maskType}-mask:start`, `${maskType}-mask:show`],\n            // 对应第 1 个action的参数\n            arg: [{ maskStyle: mask?.style }],\n          },\n          {\n            trigger: 'mask:dragstart',\n            action: [`${maskType}-mask:moveStart`],\n          },\n        ],\n        processing: [\n          {\n            trigger: 'plot:mousemove',\n            action: [`${maskType}-mask:resize`],\n          },\n          {\n            trigger: 'mask:drag',\n            action: [`${maskType}-mask:move`],\n          },\n          {\n            trigger: 'mask:change',\n            action: ['element-range-highlight:highlight'],\n          },\n        ],\n        end: [\n          { trigger: 'plot:mouseup', action: [`${maskType}-mask:end`] },\n          { trigger: 'mask:dragend', action: [`${maskType}-mask:moveEnd`] },\n          {\n            trigger: 'document:mouseup',\n            isEnable(context) {\n              return !context.isInPlot();\n            },\n            action: ['element-range-highlight:clear', `${maskType}-mask:end`, `${maskType}-mask:hide`],\n          },\n        ],\n        rollback: [{ trigger: 'dblclick', action: ['element-range-highlight:clear', `${maskType}-mask:hide`] }],\n      };\n    case 'brush-y':\n      return {\n        showEnable: [\n          { trigger: 'plot:mouseenter', action: 'cursor:crosshair', isEnable: isStartEnable || (() => true) },\n          { trigger: 'plot:mouseleave', action: 'cursor:default' },\n        ],\n        start: [\n          {\n            trigger: 'mousedown',\n            isEnable: isStartEnable || isPointInView,\n            action: ['brush-y:start', `${maskType}-mask:start`, `${maskType}-mask:show`],\n            // 对应第二个action的参数\n            arg: [null, { maskStyle: mask?.style }],\n          },\n        ],\n        processing: [\n          {\n            trigger: 'mousemove',\n            isEnable: isPointInView,\n            action: [`${maskType}-mask:resize`],\n          },\n        ],\n        end: [\n          {\n            trigger: 'mouseup',\n            isEnable: isPointInView,\n            action: ['brush-y:filter', 'brush-y:end', `${maskType}-mask:end`, `${maskType}-mask:hide`],\n          },\n        ],\n        rollback: [{ trigger: 'dblclick', action: ['brush-y:reset'] }],\n      };\n    case 'brush-y-highlight':\n      return {\n        showEnable: [\n          { trigger: 'plot:mouseenter', action: 'cursor:crosshair', isEnable: isStartEnable || (() => true) },\n          { trigger: 'mask:mouseenter', action: 'cursor:move', isEnable: isStartEnable || (() => true) },\n          { trigger: 'plot:mouseleave', action: 'cursor:default' },\n          { trigger: 'mask:mouseleave', action: 'cursor:crosshair' },\n        ],\n        start: [\n          {\n            trigger: 'plot:mousedown',\n            isEnable:\n              isStartEnable ||\n              ((context) => {\n                // 不要点击在 mask 上重新开始\n                return !context.isInShape('mask');\n              }),\n            action: [`${maskType}-mask:start`, `${maskType}-mask:show`],\n            // 对应第 1 个action的参数\n            arg: [{ maskStyle: mask?.style }],\n          },\n          {\n            trigger: 'mask:dragstart',\n            action: [`${maskType}-mask:moveStart`],\n          },\n        ],\n        processing: [\n          {\n            trigger: 'plot:mousemove',\n            action: [`${maskType}-mask:resize`],\n          },\n          {\n            trigger: 'mask:drag',\n            action: [`${maskType}-mask:move`],\n          },\n          {\n            trigger: 'mask:change',\n            action: ['element-range-highlight:highlight'],\n          },\n        ],\n        end: [\n          { trigger: 'plot:mouseup', action: [`${maskType}-mask:end`] },\n          { trigger: 'mask:dragend', action: [`${maskType}-mask:moveEnd`] },\n          {\n            trigger: 'document:mouseup',\n            isEnable(context) {\n              return !context.isInPlot();\n            },\n            action: ['element-range-highlight:clear', `${maskType}-mask:end`, `${maskType}-mask:hide`],\n          },\n        ],\n        rollback: [{ trigger: 'dblclick', action: ['element-range-highlight:clear', `${maskType}-mask:hide`] }],\n      };\n\n    default:\n      return {};\n  }\n}\n\n// 直接拷贝过来的\nregisterInteraction('brush', getInteractionCfg('brush'));\n// 复写 element-range-highlight interaction\nregisterInteraction('brush-highlight', getInteractionCfg('brush-highlight'));\n// 复写\nregisterInteraction('brush-x', getInteractionCfg('brush-x', 'x-rect'));\n// 复写\nregisterInteraction('brush-y', getInteractionCfg('brush-y', 'y-rect'));\n// 新增, x 框选高亮\nregisterInteraction('brush-x-highlight', getInteractionCfg('brush-x-highlight', 'x-rect'));\n// 新增, y 框选高亮\nregisterInteraction('brush-y-highlight', getInteractionCfg('brush-y-highlight', 'y-rect'));\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}